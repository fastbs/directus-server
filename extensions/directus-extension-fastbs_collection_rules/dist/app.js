import{defineComponent as e,resolveComponent as t,openBlock as n,createBlock as o,withCtx as l,createElementBlock as a,Fragment as i,renderList as r,createVNode as s,createCommentVNode as c,ref as u,watch as d,createTextVNode as p,createSlots as v,createElementVNode as m,normalizeStyle as g,toDisplayString as f}from"vue";import{useStores as h,useApi as b,defineInterface as y}from"@directus/extensions-sdk";import{useRouter as k}from"vue-router";var S=(e,t)=>{const n=e.__vccOpts||e;for(const[e,o]of t)n[e]=o;return n},w=S(e({name:"PageNavigation",inheritAttrs:!1,__name:"navigation",props:{current:{},pages:{}},setup:e=>(e,u)=>{const d=t("v-icon"),p=t("v-list-item-icon"),v=t("v-text-overflow"),m=t("v-list-item-content"),g=t("v-list-item"),f=t("v-list");return e.pages?(n(),o(f,{key:0,nav:""},{default:l((()=>[(n(!0),a(i,null,r(e.pages,(t=>(n(),o(g,{key:t.to,active:t.uri==e.current,to:t.to},{default:l((()=>[s(p,null,{default:l((()=>[s(d,{name:t.icon,color:t.color},null,8,["name","color"])])),_:2},1024),s(m,null,{default:l((()=>[s(v,{text:t.label},null,8,["text"])])),_:2},1024)])),_:2},1032,["active","to"])))),128))])),_:1})):c("v-if",!0)}}),[["__file","navigation.vue"]]);const _={class:"lp-container"},A={key:0,class:"lp-banner"},x=["src"],C={key:1,class:"lp-cards"},F=["onClick"],T={class:"lp-card-title"},E=["innerHTML"];var B=e({__name:"module",props:{page:{type:String,default:"home"}},setup(e){const{usePermissionsStore:y,useUserStore:S,useSettingsStore:B}=h();console.log("useStores(): ",h()),console.log("usePermissionsStore(): ",y()),console.log("useUserStore(): ",S()),console.log("useSettingsStore(): ",B());const D=e,U=k(),$=b(),{addTokenToURL:H}=function(e){return{addQueryToPath:t,getToken:n,addTokenToURL:function(e){const o=n();return o?t(e,{access_token:o}):e}};function t(e,t){const n=[];for(const[e,o]of Object.entries(t))n.push(`${e}=${o}`);return e.includes("?")?`${e}&${n.join("&")}`:`${e}?${n.join("&")}`}function n(){return e.defaults?.headers?.Authorization?.split(" ")[1]||e.defaults?.headers?.common?.Authorization?.split(" ")[1]||null}}($),L=u(S().isAdmin);console.log("isAdmin:",L.value);const j=u(""),z=u(""),P=u([]),q=u(""),N=u([{name:"Home",to:"/landing-page"}]),O=u([]);d((()=>D.page),(()=>{R(D.page)}));const R=e=>{if(null===e)j.value="500: Internal Server Error",N.value.splice(1,1),z.value="",P.value=[],q.value="";else{switch(e){case"home":j.value="Home",z.value=H("/assets/83BD365C-C3CE-4015-B2AD-63EDA9E52A69?width=2000&height=563&fit=cover"),P.value=O.value,q.value="<p>Lorem ipsum dolor sit amet.</p>";break;case"hello-world":j.value="Hello World",z.value=H("/assets/853B243D-A1BF-6051-B1BF-23EDA8E32A09?width=2000&height=563&fit=cover"),P.value=O.value,q.value="<p>Lorem ipsum dolor sit amet.</p>";break;case"contact":j.value="Contact Us",z.value=H("/assets/91CE173D-A1AD-4104-A1EC-74FCB8F41B58?width=2000&height=563&fit=cover"),P.value=[],q.value="<p>Lorem ipsum dolor sit amet.</p>";break;default:j.value="404: Not Found"}"home"===e?N.value.splice(1,1):N.value[1]={name:j.value,to:`/fastbs.module/${e}`}}};return R(D.page),O.value=[{label:"Home",uri:"fastbs.module",to:"/fastbs.module",icon:"home",color:"#6644FF"},{label:"Hello World",uri:"hello-world",to:"/fastbs.module/hello-world",icon:"public",color:"#2ECDA7"},{label:"Contact Us",uri:"contact",to:"/fastbs.module/contact",icon:"phone",color:"#3399FF"}],console.log(O.value),(u,d)=>{const h=t("v-info"),b=t("private-view"),y=t("v-breadcrumb"),k=t("v-icon"),S=t("router-view");return L.value?(n(),o(b,{key:1,title:j.value},v({navigation:l((()=>[s(w,{current:e.page,pages:O.value},null,8,["current","pages"])])),default:l((()=>[m("div",_,[z.value?(n(),a("div",A,[m("img",{src:z.value,alt:""},null,8,x)])):c("v-if",!0),P.value?(n(),a("div",C,[(n(!0),a(i,null,r(P.value.filter((t=>t.uri!=e.page)),(e=>(n(),a("div",{class:"lp-card",key:e.uri,style:g(`background-color: ${e.color}`),onClick:t=>(e=>{const t=U.resolve(`${e}`);U.push(t)})(e.to)},[s(k,{name:e.icon},null,8,["name"]),m("span",T,f(e.label),1)],12,F)))),128))])):c("v-if",!0),q.value?(n(),a("div",{key:2,class:"lp-body",innerHTML:q.value},null,8,E)):c("v-if",!0)]),s(S,{name:"landing-page",page:e.page},null,8,["page"])])),_:2},[N.value?{name:"headline",fn:l((()=>[s(y,{items:N.value},null,8,["items"])])),key:"0"}:void 0]),1032,["title"])):(n(),o(b,{key:0,title:"401: Unauthorized"},{default:l((()=>[s(h,{icon:"block",title:"Unauthorized Access",type:"danger"},{default:l((()=>[p(" You do not have permission to access this page ")])),_:1})])),_:1}))}}}),D=[],U=[];!function(e,t){if(e&&"undefined"!=typeof document){var n,o=!0===t.prepend?"prepend":"append",l=!0===t.singleTag,a="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(l){var i=D.indexOf(a);-1===i&&(i=D.push(a)-1,U[i]={}),n=U[i]&&U[i][o]?U[i][o]:U[i][o]=r()}else n=r();65279===e.charCodeAt(0)&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function r(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var n=Object.keys(t.attributes),l=0;l<n.length;l++)e.setAttribute(n[l],t.attributes[n[l]]);var i="prepend"===o?"afterbegin":"beforeend";return a.insertAdjacentElement(i,e),e}}(".lp-container {\n  padding: var(--content-padding);\n  padding-top: 0;\n  width: 100%;\n  max-width: 1024px;\n}\n.lp-container > div {\n  margin-bottom: var(--content-padding);\n}\n\n.lp-banner {\n  border-radius: var(--border-radius);\n  overflow: hidden;\n}\n.lp-banner img {\n  display: block;\n  width: 100%;\n}\n\n.lp-cards {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  column-gap: var(--input-padding);\n  row-gap: var(--input-padding);\n}\n.lp-cards .lp-card {\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  border-radius: var(--border-radius);\n  padding: var(--input-padding);\n  color: white;\n}\n.lp-cards .lp-card .v-icon {\n  width: 100%;\n  height: 50px;\n  margin-bottom: 6px;\n}\n.lp-cards .lp-card .v-icon i {\n  font-size: 50px;\n  color: white;\n}\n.lp-cards .lp-card .lp-card-title {\n  display: block;\n  font-weight: bold;\n  font-size: 1.4em;\n  line-height: 1.2;\n}",{});var $=S(B,[["__file","module.vue"]]),H={id:"fastbs.module",name:"Fastbs Collection Rules",icon:"rocket_launch",color:"#FF0000",routes:[{name:"home",path:"",props:!0,component:$},{name:"page",path:":page",props:!0,component:$}]};const L=[y({id:"fastbs.interface.collection.selector",name:"Collection selector",icon:"fact_check",description:"This is Fastbs custom collection selector interface",component:S(e({__name:"interface",props:{disabled:{type:Boolean,default:!1},collection:{type:String,required:!0},field:{type:String,required:!0},value:{type:String,required:!0},placeholder:{type:String,default:"Выберите коллекцию"}},emits:["input"],setup(e,{emit:l}){const a=e,i=l;console.log(">>> useStores():",h());const{useCollectionsStore:r,useSettingsStore:s,useAppStore:c}=h(),p=r();console.log(">>> useSettingsStore():",s()),console.log(">>> useAppStore():",c());let v=!0;const m=u(""),g=u(p.allCollections.map((e=>({text:e.collection,value:e.collection}))));return d((()=>a.value),((e,t)=>{v&&(console.log(">>> Field:",a.field,"  props.value new value: ",e),m.value=e)})),d((()=>m.value),((e,t)=>{v||(console.log(">>> Field:",a.field,"  emit:",e),i("input",e)),v=!1})),(l,a)=>{const i=t("v-select");return n(),o(i,{modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=e=>m.value=e),items:g.value,disabled:e.disabled,placeholder:e.placeholder,showDeselect:!0},null,8,["modelValue","items","disabled","placeholder"])}}}),[["__file","interface.vue"]]),types:["string"],relational:!1,group:"selection",options:[{field:"placeholder",type:"string",name:"Placeholder",meta:{interface:"input",width:"half",options:{placeholder:"Выберите коллекцию"}}}]})],j=[],z=[],P=[H],q=[],N=[],O=[];export{j as displays,L as interfaces,z as layouts,P as modules,O as operations,q as panels,N as themes};
